"use strict";

var modal = document.getElementById("qwM"),
    modal2 = document.getElementById("qwMM"),
    modal3 = document.getElementById("qwMMM"),
    btn = document.getElementById("qw"),
    btn2 = document.getElementById("qww"),
    btn3 = document.getElementById("qwww");
btn.onclick = function () {
  modal.style.display = "flex";
}, btn2.onclick = function () {
  modal2.style.display = "flex";
}, btn3.onclick = function () {
  modal3.style.display = "flex";
};

$("#closeVideo").click(function(){
  var modalQuest = document.getElementById("qwM");
  modalQuest.style.display = "none";
});

$("#closeQuest").click(function(){
  var modalQuest = document.getElementById("qwMMM");
  modalQuest.style.display = "none";
});

$("#closeDeal").click(function(){
  var modalQuest = document.getElementById("qwMM");
  modalQuest.style.display = "none";
});



$(document).ready(function(){
  $("#sendVideoForm").on('submit', function(e){
    e.preventDefault();
    var nameVideo = $("#nameVideo").val();
    var phoneVideo = $("#phoneVideo").val();
    var emailVideo = $("#emailVideo").val();
    var commentVideo = $("#commentVideo").val();
    var fileVideo = document.getElementById("fileVideo").files[0];
    var videoCheckApproval = $("#videoCheckApproval").prop("checked");
    if(nameVideo != "" && phoneVideo != "" && emailVideo != "" && commentVideo != "" && fileVideo != ""){
      if(videoCheckApproval === true){
        if(fileVideo.type == "video/mp4" || fileVideo.type == "video/mpeg" || fileVideo.type == "video/webm" || fileVideo.type == "video/flv" || fileVideo.type=="video/x-ms-wmv"){
          if(fileVideo.size < 1073741824){
            var formDataVideo = new FormData();
            formDataVideo.append('fileVideo', fileVideo);
            formDataVideo.append('nameVideo', nameVideo);
            formDataVideo.append('phoneVideo', phoneVideo);
            formDataVideo.append('emailVideo', emailVideo);
            formDataVideo.append('commentVideo', commentVideo);
            formDataVideo.append('videoCheckApproval', videoCheckApproval);
            formDataVideo.append('commandPost', 'sendVideo');
            $.ajax({
              url: 'assets/backend/sendFormMainPage/ajaxFormMainPage.php',
              type: 'POST',
              dataType: 'html',
              contentType: false,
              cache: false,
              processData: false,
              data: formDataVideo,
              beforeSend: function(){
                console.debug('Запрос отправлен. Ждите ответа.');
                $("#sendVideoRequest").html('сюда прелоадер херачишь');// Не забудь добавить прелоадер, туже гифку или что-нить 
              },
              error: function(req, text, error){
                $("#sendVideoForm").trigger('reset');
                $("#sendVideoRequest").html('Ошибка отправки файла на сервер');                       //Выводишь ошибку, если запрос не прошел
              },
              success: function(msg){
                $("#sendVideoRequest").html(msg);
                $("#sendVideoForm").trigger('reset');
              }
            });
          }else{
            $("#sendVideoRequest").html("Максимальный объем файла 1гб и тут тоже https://getbootstrap.com/docs/5.1/components/alerts/");       //ТУТ ОБРАТИ ВНИМАНИЕ, ЧТО НАДО СВЕРСТАТЬ ОШИБКУ В НОРМАЛЬНОМ ВИДЕ
          }
        }else{
          $("#sendVideoRequest").html("Неправильный формат видео, разрешено MP4/MPEG/WEBM/FLV/WMV и тут тоже https://getbootstrap.com/docs/5.1/components/alerts/");       //ТУТ ОБРАТИ ВНИМАНИЕ, ЧТО НАДО СВЕРСТАТЬ ОШИБКУ В НОРМАЛЬНОМ ВИДЕ
        }
      }else{
        $("#sendVideoRequest").html("Вы забыли подписать согласие и тут тоже https://getbootstrap.com/docs/5.1/components/alerts/");       //ТУТ ОБРАТИ ВНИМАНИЕ, ЧТО НАДО СВЕРСТАТЬ ОШИБКУ В НОРМАЛЬНОМ ВИДЕ
      }
    }else{
      $("#sendVideoRequest").html("Тут сделай ошибку заполнения, ввиде алерта, как тут: https://getbootstrap.com/docs/5.1/components/alerts/");       //ТУТ ОБРАТИ ВНИМАНИЕ, ЧТО НАДО СВЕРСТАТЬ ОШИБКУ В НОРМАЛЬНОМ ВИДЕ
    }
  });
});

$("#sendDealFromUser").click(function(){
  var dealFio = $("#usernameDeal").val();
  var dealPhone = $("#phoneDeal").val();
  var dealEmail = $("#emailDeal").val();
  var dealComm = $("#commDeal").val();
  var usernameDealFrom = $("#usernameDealFrom").val();
  var phoneDealFrom = $("#phoneDealFrom").val();
  var emailDealFrom = $("#emailDealFrom").val();
  var dealCheckApproval = $("#dealCheckApproval").prop("checked");
  if(dealFio != "" && dealPhone != "" && dealEmail != "" && dealComm != "" && usernameDealFrom != "" && phoneDealFrom != "" && emailDealFrom != ""){
    if(dealCheckApproval === true){
      $.post(
        "assets/backend/sendFormMainPage/ajaxFormMainPage.php",
        {
            commandPost: "sendDeal",
            dealFio: dealFio,
            dealPhone: dealPhone,
            dealEmail: dealEmail,
            dealComm: dealComm,
            usernameDealFrom: usernameDealFrom,
            phoneDealFrom: phoneDealFrom,
            emailDealFrom: emailDealFrom,
            dealCheckApproval : dealCheckApproval,
        },		
        function(msg) 
        {
            $("#dealRequest").html(msg);
            $("#dealFromUser").trigger('reset');
        }
      );
    }else{
      $("#dealRequest").html("Вы забыли подписать согласие и тут тоже https://getbootstrap.com/docs/5.1/components/alerts/");       //ТУТ ОБРАТИ ВНИМАНИЕ, ЧТО НАДО СВЕРСТАТЬ ОШИБКУ В НОРМАЛЬНОМ ВИДЕ
    }
  }else{
    $("#dealRequest").html("Тут сделай ошибку заполнения, ввиде алерта, https://getbootstrap.com/docs/5.1/components/alerts/");       //ТУТ ОБРАТИ ВНИМАНИЕ, ЧТО НАДО СВЕРСТАТЬ ОШИБКУ В НОРМАЛЬНОМ ВИДЕ
  }
});

$("#sendQuestionFromUser").click(function(){
  var usernameQuest = $("#usernameQuest").val();
  var phoneQuest = $("#phoneQuest").val();
  var emailQuest = $("#emailQuest").val();
  var commentQuest = $("#commentQuest").val();
  var questCheckApproval = $("#questCheckApproval").prop("checked");
  if(usernameQuest != "" && phoneQuest != "" && emailQuest != "" && commentQuest != ""){
    if(questCheckApproval === true){
      $.post(
        "assets/backend/sendFormMainPage/ajaxFormMainPage.php",
        {
            commandPost: "sendQuest",
            usernameQuest: usernameQuest,
            phoneQuest: phoneQuest,
            emailQuest: emailQuest,
            commentQuest: commentQuest,
            questCheckApproval : questCheckApproval,
        },		
        function(msg) 
        {
            $("#questRequest").html(msg);
            $("#questRequestForm").trigger('reset');
        }
      );
    }else{
      $("#questRequest").html("Вы забыли подписать согласие и тут тоже https://getbootstrap.com/docs/5.1/components/alerts/");       //ТУТ ОБРАТИ ВНИМАНИЕ, ЧТО НАДО СВЕРСТАТЬ ОШИБКУ В НОРМАЛЬНОМ ВИДЕ
    }
  }else{
    $("#questRequest").html("Тут сделай ошибку заполнения, ввиде алерта, как тут: https://getbootstrap.com/docs/5.1/components/alerts/");       //ТУТ ОБРАТИ ВНИМАНИЕ, ЧТО НАДО СВЕРСТАТЬ ОШИБКУ В НОРМАЛЬНОМ ВИДЕ
  }
});